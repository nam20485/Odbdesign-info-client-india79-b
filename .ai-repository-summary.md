# AI Repository Summary

## Project Overview
**OdbDesignInfo Client** is a cross-platform desktop application for viewing and analyzing ODB++ PCB (Printed Circuit Board) design data. Built with Avalonia UI, it connects to an OdbDesignServer backend to display hierarchical design information including components, nets, layers, and drill tools.

## Architecture
The solution follows **Clean Architecture** with three main layers:

### Source Projects (`src/`)
- **OdbDesignInfoClient** - Main Avalonia UI desktop application (WinExe)
- **OdbDesignInfoClient.Core** - Core business logic, ViewModels, Models, and service interfaces (Class Library)
- **OdbDesignInfoClient.Services** - Service implementations including REST/gRPC clients and IPC (Class Library)

### Test Projects (`tests/`)
- **OdbDesignInfoClient.Tests** - xUnit unit tests with Moq for mocking
- **OdbDesignInfoClient.IntegrationTests** - Integration tests using TestContainers for Docker-based testing

## Technology Stack
| Component | Technology | Version |
|-----------|------------|---------|
| Runtime | .NET | 10.0 |
| UI Framework | Avalonia UI | 11.2.7 |
| MVVM | CommunityToolkit.Mvvm | 8.4.0 |
| REST Client | Refit | 8.0.0 |
| gRPC | Grpc.Net.Client | 2.67.0 |
| Logging | Serilog | 4.2.0 |
| Resiliency | Polly | 8.5.2 |
| Testing | xUnit + Moq | 2.9.3 / 4.20.72 |

## Key Design Patterns
- **MVVM (Model-View-ViewModel)** - Using source generators from CommunityToolkit.Mvvm
- **Dependency Injection** - Microsoft.Extensions.DependencyInjection
- **Repository Pattern** - Service interfaces in Core, implementations in Services
- **State Machine** - Connection state management (Disconnected → Connecting → Connected → Reconnecting)

## Project Dependencies
```
OdbDesignInfoClient
├── OdbDesignInfoClient.Core
└── OdbDesignInfoClient.Services
    └── OdbDesignInfoClient.Core

OdbDesignInfoClient.Tests
├── OdbDesignInfoClient.Core
└── OdbDesignInfoClient.Services

OdbDesignInfoClient.IntegrationTests
├── OdbDesignInfoClient.Core
└── OdbDesignInfoClient.Services
```

## Key Files
- `OdbDesignInfoClient.sln` - Solution file
- `Directory.Build.props` - Shared build properties and package versions
- `global.json` - .NET SDK version pinning (10.0.100)
- `src/OdbDesignInfoClient/App.axaml.cs` - Application entry and DI configuration
- `src/OdbDesignInfoClient.Core/ViewModels/MainViewModel.cs` - Main application ViewModel
- `src/OdbDesignInfoClient.Core/Services/Interfaces/` - Service contracts
- `src/OdbDesignInfoClient.Services/` - Service implementations

## Build Commands
```bash
# Restore and build
dotnet restore OdbDesignInfoClient.sln
dotnet build OdbDesignInfoClient.sln

# Run tests
dotnet test OdbDesignInfoClient.sln

# Run application
dotnet run --project src/OdbDesignInfoClient/OdbDesignInfoClient.csproj

# Publish for distribution
dotnet publish src/OdbDesignInfoClient -c Release -r win-x64 --self-contained
```

## CI/CD
GitHub Actions workflow in `.github/workflows/build.yml`:
- Builds on Windows, Linux, and macOS
- Runs unit tests
- Publishes platform-specific binaries

## Documentation
- `plan_docs/tech-stack.md` - Technology decisions
- `plan_docs/OdbDesignInfoClient-Architecture.md` - Detailed architecture
- `plan_docs/Application-Implementation-Specification-OdbDesignInfo-Client.md` - Full specification
- `docs/TESTING.md` - Testing guidelines
